DROP TABLE IF EXISTS Rols;
DROP TABLE IF EXISTS Persons;
DROP TABLE IF EXISTS Persons_Rols;
DROP TABLE IF EXISTS Suppliers;
DROP TABLE IF EXISTS Manufacturrers;
DROP TABLE IF EXISTS Suppliers_Manufacturrers;
DROP TABLE IF EXISTS Category_goods;
DROP TABLE IF EXISTS Goods;
DROP TABLE IF EXISTS Statuses_order;
DROP TABLE IF EXISTS Postals_code;
DROP TABLE IF EXISTS Pvz_geolocation;
DROP TABLE IF EXISTS Orders_detail;
DROP TABLE IF EXISTS Orders;

CREATE TABLE Rols (
	ID_rol SERIAL,
	name_rol TEXT NOT NULL,
	PRIMARY KEY (ID_rol)
);

CREATE TABLE Persons (
	ID_person SERIAL,
	First_name TEXT NOT NULL,
	Middle_name TEXT NOT NULL,
	Last_name TEXT DEFAULT NULL,
	Login TEXT NOT NULL,
	Password TEXT NOT NULL,
	PRIMARY KEY (ID_person)
);

CREATE TABLE Persons_Rols (
	ID_person INT NOT NULL,
	ID_rol INT NOT NULL,
	PRIMARY KEY (ID_person, ID_rol),
	FOREIGN KEY (ID_person) REFERENCES Persons(ID_person),
	FOREIGN KEY (ID_rol) REFERENCES Rols(ID_rol)
);

CREATE TABLE Suppliers (
	ID_supplier SERIAL,
	name_supplier TEXT NOT NULL,
	PRIMARY KEY (ID_supplier)
);

CREATE TABLE Manufacturrers (
	ID_manufacturrer SERIAL,
	name_manufacturrer TEXT NOT NULL,
	PRIMARY KEY(ID_Manufacturrer)
);

CREATE TABLE Suppliers_Manufacturrers (
	article INT NOT NULL,
	ID_supplier INT NOT NULL,
	ID_manufacturrer INT NOT NULL,
	PRIMARY KEY (article),
	FOREIGN KEY (ID_supplier) REFERENCES Suppliers(ID_supplier),
	FOREIGN KEY (ID_manufacturrer) REFERENCES Manufacturrers(ID_manufacturrer)
);

CREATE TABLE Category_goods (
	ID_category SERIAL,
	name_category TEXT NOT NULL,
	PRIMARY KEY (ID_category)
);

CREATE TABLE Goods (
	article INT,
	name_good TEXT NOT NULL,
	unit INT NOT NULL,
	price INT NOT NULL,
	ID_category INT NOT NULL,
	discount INT DEFAULT NULL,
	stock_quality INT DEFAULT NULL,
	description TEXT DEFAULT NULL,
	photo TEXT DEFAULT NULL,
	PRIMARY KEY (article),
	FOREIGN KEY (ID_category) REFERENCES Category_goods(ID_category)
);

CREATE TABLE Statuses_order (
	ID_status_order SERIAL,
	name_status TEXT NOT NULL,
	PRIMARY KEY (ID_status_order)
);


CREATE TABLE Postals_code (
	ID_postal_code SERIAL,
	Address TEXT NOT NULL,
	PRIMARY KEY (ID_postal_code)
);

CREATE TABLE Pvz_geolocation (
	ID_pvz SERIAL,
	ID_postal_code INT NOT NULL,
	PRIMARY KEY (ID_pvz),
	FOREIGN KEY (ID_postal_code) REFERENCES Postals_code(ID_postal_code)
);

CREATE TABLE Orders_detail (
	ID_order_detail SERIAL,
	article INT NOT NULL,
	order_date DATE DEFAULT NULL,
	delivery_date DATE DEFAULT NULL,
	ID_pvz INT NOT NULL,
	code INT NOT NULL,
	ID_status_order INT NOT NULL,
	PRIMARY KEY (ID_order_detail),
	FOREIGN KEY (ID_pvz) REFERENCES Pvz_geolocation(ID_pvz),
	FOREIGN KEY (ID_status_order) REFERENCES Statuses_order(ID_status_order)
);

CREATE TABLE Orders (
	ID_order_detail INT NOT NULL,
	ID_person INT NOT NULL,
	PRIMARY KEY (ID_order_detail, ID_person),
	FOREIGN KEY (ID_order_detail) REFERENCES Orders_detail(ID_order_detail),
	FOREIGN KEY (ID_person) REFERENCES Persons(ID_person)
);

-- INSERT INTO имя_таблицы VALUES (), (), ... (); ТВОЯ РАБОТА - YOUR WORK